
<!DOCTYPE html>
<html lang="en">
  <head>
      <% include partials/head %>
  </head>
  <button class="btn btn-danger" href="/backAccueilUser" onClick='document.location.href="/backAccueilUser"'>
    back
  </button>
  <div class="text-center">
<div id="form">
    <h1>Update your metrics</h1>
    <hr/>
    <form action="/update" method="post" class="main-form needs-validation" style="width : 300px ; margin: auto" >
        
    <div class="form-group">
        
      <label for="form_password">Key of your metric :</label>
      <input id="form_password" type="number" name="key"  class="form-control  " placeholder="type number" required  />
    </div>
 
    <div class="form-group">
      <label for="form_password">Value</label>
      <input id="form_password" type="number" name="value" class="form-control  " placeholder="type number" required  />
    </div>
    <div class="form-group">
        <button class="btn btn-success btn-lg" type="submit">
          Update
         </button>
    </div>
    </div>
    </form>
    <hr/>
    <button class="btn btn-success" id="show-metrics">
      Bring the metrics
    </button>
    <div id="metrics"> </div>
    <hr/>
   
  </div>
  <script>
    $('#show-metrics').click((e) => {
      e.preventDefault();
      $.getJSON("/metrics", {}, (data) => {
        const content = data.map(d => {
          return 'timestamp: '+d.timestamp+', value: '+d.value+', Key: '+d.key +' <br> ';
        })
        $('#metrics').append(content.join("\n"));
      });
    })
  </script>
 
  </div>
 
</div>

</div>

</html>

